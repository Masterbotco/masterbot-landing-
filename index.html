<body>
<script>
  const endpoint = "https://formspree.io/f/mqaleryr";
  const form = document.getElementById('early-access');
  const msg  = document.getElementById('msg');

  form.addEventListener('submit', async function (e) {
    e.preventDefault(); // evita redirect

    const email = form.email.value;

    // 1) Evento GA4 PRIMA dell'invio
    if (typeof gtag === 'function') {
      gtag('event', 'early_access_submit', {
        event_category: 'lead',
        event_label: 'formspree'
      });
    }

    // 2) Invio AJAX a Formspree
    try {
      const res = await fetch(endpoint, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email })
      });

      if (res.ok) {
        msg.style.display = 'block';
        form.reset();
      } else {
        msg.textContent = "Errore, riprova pi√π tardi.";
        msg.style.display = 'block';
      }
    } catch (err) {
      msg.textContent = "Errore di rete, riprova.";
      msg.style.display = 'block';
    }
  });
</script>

 
</body>
